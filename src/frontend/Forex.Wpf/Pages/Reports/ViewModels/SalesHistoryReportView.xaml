<UserControl
    x:Class="Forex.Wpf.Pages.Reports.ViewModels.SalesHistoryReportView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Forex.Wpf.Resources.UserControls"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:vm="clr-namespace:Forex.Wpf.Pages.Reports.ViewModels">

    <Grid Margin="12" Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="90" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>


        <!--  Filter panel — SEN HOZIRGI DIZAYNING TO‘LIQ!  -->
        <Grid Grid.Row="0" Margin="10,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Mijoz + Sana  -->
            <Grid Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="5,0"
                    VerticalAlignment="Center"
                    FontSize="13"
                    Text="Mijoz" />
                <Border
                    Grid.Row="0"
                    Grid.Column="1"
                    Height="30"
                    BorderBrush="#CCCCCC"
                    BorderThickness="2"
                    CornerRadius="4">
                    <ComboBox
                        DisplayMemberPath="Name"
                        Padding="3"
                        FontSize="14"
                        BorderThickness="0"
                        IsEditable="True"
                        ItemsSource="{Binding AvailableCustomers}"
                        SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}" />
                </Border>

                <TextBlock
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="5,0"
                    VerticalAlignment="Center"
                    FontSize="13"
                    Text="Xisobot davri" />
                <Grid Grid.Row="1" Grid.Column="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <controls:UserCalendar
                        Grid.Column="0"
                        Width="110"
                        Height="30"
                        SelectedDate="{Binding BeginDate, Mode=TwoWay}" />
                    <TextBlock
                        Grid.Column="1"
                        Margin="2,0"
                        VerticalAlignment="Center"
                        Text="dan" />
                    <controls:UserCalendar
                        Grid.Column="2"
                        Width="110"
                        Height="30"
                        SelectedDate="{Binding EndDate, Mode=TwoWay}" />
                    <TextBlock
                        Grid.Column="3"
                        Margin="2,0,0,0"
                        VerticalAlignment="Center"
                        Text="gacha" />
                    <Button Grid.Column="4"
                            Margin="3 0 0 0"
                            Width="36"
                            Height="30"
                            ToolTip="Filtr"
                            Command="{Binding FilterCommand}"
                            Padding="0"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center">

                        <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Viewbox Width="18" Height="18">
                                <Path Data="M3,5h18v2H3V5z M6,11h12v2H6v-2z M10,17h4v2h-4v-2z"
                                      Fill="Black"
                                      Stretch="Uniform"/>
                            </Viewbox>
                        </Grid>

                    </Button>

                </Grid>
            </Grid>

            <!--  Kodi + Nomi  -->
            <Grid Grid.Column="1" Margin="20,0,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="15,0,3,0"
                    VerticalAlignment="Center"
                    FontSize="13"
                    Text="Kodi" />
                <Border
                    Grid.Row="0"
                    Grid.Column="1"
                    Height="30"
                    BorderBrush="#CCCCCC"
                    BorderThickness="2"
                    CornerRadius="4">
                    <ComboBox
                        Width="180"
                        Padding="3"
                        BorderThickness="0"
                        DisplayMemberPath="Code"
                        IsEditable="True"
                        ItemsSource="{Binding AvailableProducts}"
                        SelectedItem="{Binding SelectedCode}" />
                </Border>

                <TextBlock
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="15,0"
                    VerticalAlignment="Center"
                    FontSize="13"
                    Text="Nomi" />
                <Border
                    Grid.Row="1"
                    Grid.Column="1"
                    Height="30"
                    BorderBrush="#CCCCCC"
                    BorderThickness="2"
                    CornerRadius="4">
                    <ComboBox
                        Width="180"
                        Padding="3"
                        BorderThickness="0"
                        DisplayMemberPath="Name"
                        IsEditable="True"
                        ItemsSource="{Binding AvailableProducts}"
                        SelectedItem="{Binding SelectedProduct}" />
                </Border>
            </Grid>

            <!--  Tugmalar  -->
            <StackPanel
                Grid.Column="2"
                Margin="20,5,10,0"
                Orientation="Vertical">
                <Button
                    Height="29"
                    Margin="0,3"
                    Command="{Binding PreviewCommand}"
                    Content="Ko‘rish" />
                <Button
                    Height="29"
                    Margin="0,3"
                    Command="{Binding ClearFilterCommand}"
                    Content="Tozalash" />
            </StackPanel>
            <StackPanel
                Grid.Column="3"
                Margin="0,5"
                Orientation="Vertical">
                <Button
                    Height="29"
                    Margin="0,3"
                    Command="{Binding PrintCommand}"
                    Content="Pechat" />
                <Button
                    Height="29"
                    Margin="0,3"
                    Command="{Binding ExportToExcelCommand}"
                    Content="Excel" />
            </StackPanel>
        </Grid>

        <!--  DataGrid — SEN HOZIRGI USTUNLARING TO‘LIQ!  -->
        <DataGrid Grid.Row="1" Margin="10,5"
                  ItemsSource="{Binding FilteredItems}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  AlternatingRowBackground="#F8F9FA"
                  RowBackground="White"
                  FontSize="14"
                  HeadersVisibility="Column"
                  RowHeaderWidth="0"
                  GridLinesVisibility="All"
                  BorderThickness="1"
                  BorderBrush="#DDDDDD">

            <DataGrid.Columns>

                <!-- 1. Sana — O‘rtada (header + qiymat) -->
                <DataGridTextColumn Header="Sana" Binding="{Binding Date, StringFormat=dd.MM.yyyy}" Width="0.8*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 2. Mijoz — Chapda -->
                <DataGridTextColumn Header="Mijoz" Binding="{Binding Customer}" Width="1.5*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Left"/>
                            <Setter Property="Margin" Value="8,0,0,0"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 3. Kodi — O‘rtada -->
                <DataGridTextColumn Header="Kodi" Binding="{Binding Code}" Width="0.6*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 4. Nomi — Chapda -->
                <DataGridTextColumn Header="Nomi" Binding="{Binding ProductName}" Width="*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Left"/>
                            <Setter Property="Margin" Value="8,0,0,0"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 5. Razmer — O‘rtada -->
                <DataGridTextColumn Header="Razmer" Binding="{Binding Type}" Width="100">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 6. Qopdagi soni — O‘rtada -->
                <DataGridTextColumn Header="Qopdagi soni" Binding="{Binding BundleItemCount, StringFormat=N0}" Width="0.8*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 7. Jami — O‘ngda -->
                <DataGridTextColumn Header="Jami" Binding="{Binding TotalCount, StringFormat=N0}" Width="*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                            <Setter Property="Margin" Value="0,0,8,0"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 8. O‘lchov — O‘rtada -->
                <DataGridTextColumn Header="O‘lchov" Binding="{Binding UnitMeasure}" Width="0.7*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 9. Narxi — O‘ngda -->
                <DataGridTextColumn Header="Narxi" Binding="{Binding UnitPrice, StringFormat=N2}" Width="*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                            <Setter Property="Margin" Value="0,0,8,0"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- 10. Umumiy summa — O‘ngda -->
                <DataGridTextColumn Header="Umumiy summa" Binding="{Binding Amount, StringFormat=N2}" Width="*">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="Background" Value="#FFE6F0FF"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                            <Setter Property="Margin" Value="0,0,10,0"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="Foreground" Value="#FF1976D2"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>