<UserControl x:Class="Forex.Wpf.Pages.Reports.ViewModels.DebtorCreditorReportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             Background="White">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="90" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <!-- FILTRLAR + TUGMALAR -->
        <Grid Grid.Row="0" Margin="10,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <!-- MIJOZ COMBOBOX -->
            <Grid Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="250" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Grid.Column="0"
                           Margin="5,0" VerticalAlignment="Center"
                           FontSize="13" Text="Mijoz" />
                <Border
                    Grid.Row="0"
                    Grid.Column="1"
                    Height="30"
                    BorderBrush="#CCCCCC"
                    BorderThickness="2"
                    CornerRadius="4">
                    <ComboBox
                        Padding="3"
                        BorderThickness="0"
                        DisplayMemberPath="Name"
                        FontSize="14"
                        IsEditable="True"
                        ItemsSource="{Binding AvailableCustomers}"
                        SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}" />
                </Border>
            </Grid>
            <!-- KO‘RISH + TOZALASH -->
            <StackPanel Grid.Column="1" Margin="30,0,0,0" VerticalAlignment="Center" Orientation="Vertical">
                <Button Height="32" Background="#1976D2" Foreground="White"
                        BorderThickness="0" md:ButtonAssist.CornerRadius="6"
                        Margin="0,4" FontSize="14" FontWeight="SemiBold"
                        Command="{Binding PreviewCommand}"
                        Content="Ko‘rish" />
                <Button Height="32" Background="#607D8B" Foreground="White"
                        BorderThickness="0" md:ButtonAssist.CornerRadius="6"
                        Margin="0,4" FontSize="14"
                        Command="{Binding ClearFilterCommand}"
                        Content="Tozalash" />
            </StackPanel>
            <!-- PECHAT + EXCEL -->
            <StackPanel Grid.Column="2" Margin="15,0" VerticalAlignment="Center" Orientation="Vertical">
                <Button Height="32" Background="#00897B" Foreground="White"
                        BorderThickness="0" md:ButtonAssist.CornerRadius="6"
                        Margin="0,4" FontSize="14" FontWeight="SemiBold"
                        Command="{Binding PrintCommand}"
                        Content="Pechat" />
                <Button Height="32" Background="#2E7D32" Foreground="White"
                        BorderThickness="0" md:ButtonAssist.CornerRadius="6"
                        Margin="0,4" FontSize="14" FontWeight="SemiBold"
                        Command="{Binding ExportToExcelCommand}"
                        Content="Excel" />
            </StackPanel>
        </Grid>
        <DataGrid Grid.Row="1" Margin="10,5"
                  ItemsSource="{Binding FilteredItems}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  FontSize="14"
                  AlternatingRowBackground="#F5F5F5"
                  RowHeight="48"
                  GridLinesVisibility="Horizontal"
                  BorderBrush="#DDDDDD">
            <!-- ⭐ HEADERlarni o‘rtaga, fon rang, semi-bold -->
            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                    <Setter Property="FontWeight" Value="SemiBold" />
                    <Setter Property="Background" Value="#E3F2FD" />
                    <Setter Property="Padding" Value="8" />
                </Style>
            </DataGrid.ColumnHeaderStyle>
            <DataGrid.Columns>
                <!-- Mijoz -->
                <DataGridTextColumn Header="Mijoz"
                                    Binding="{Binding Name}"
                                    Width="*" />
                <!-- Telefon -->
                <DataGridTextColumn Header="Telefon"
                                    Binding="{Binding Phone}"
                                    Width="*" />
                <!-- Address -->
                <DataGridTextColumn Header="Manzil"
                                    Binding="{Binding Address}"
                                    Width="*" />
                <!-- Bizga qarz (Debtor) -->
                <DataGridTextColumn Header="Debit(Bizga qarzi)"
                                    Binding="{Binding DebtorAmount, StringFormat=N2}"
                                    Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right" />
                            <Setter Property="Foreground" Value="#2E7D32" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!-- Bizning qarzimiz (Creditor) -->
                <DataGridTextColumn Header="Kredit(Bizning qarzimiz)"
                                    Binding="{Binding CreditorAmount, StringFormat=N2}"
                                    Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right" />
                            <Setter Property="Foreground" Value="#D32F2F" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
        <!-- Jami qatorlar soni va yig'indilar -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,20,10">
            <TextBlock Text="{Binding FilteredItems.Count, StringFormat='Jami yozuvlar: {0} ta'}" FontSize="14" FontWeight="Medium" Foreground="#555" Margin="0,0,20,0" />
            <TextBlock Text="{Binding TotalDebtor, StringFormat='Jami debitor: {0:N2}'}" FontSize="14" FontWeight="Medium" Foreground="#2E7D32" Margin="0,0,20,0" />
            <TextBlock Text="{Binding TotalCreditor, StringFormat='Jami kreditor: {0:N2}'}" FontSize="14" FontWeight="Medium" Foreground="#D32F2F" Margin="0,0,20,0" />
            <TextBlock Text="{Binding TotalBalance, StringFormat='Umumiy balans: {0:N2}'}" FontSize="14" FontWeight="Bold"  />
        </StackPanel>
    </Grid>
</UserControl>