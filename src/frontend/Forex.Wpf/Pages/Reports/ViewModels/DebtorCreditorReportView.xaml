<UserControl
    x:Class="Forex.Wpf.Pages.Reports.ViewModels.DebtorCreditorReportView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    Background="White">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="90" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <!--  FILTRLAR + TUGMALAR  -->
        <Grid Grid.Row="0" Margin="10,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <!--  MIJOZ COMBOBOX  -->
            <Grid Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="250" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <TextBlock
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="5,0"
                    VerticalAlignment="Center"
                    FontSize="13"
                    Text="Mijoz" />
                <Border
                    Grid.Row="0"
                    Grid.Column="1"
                    Height="30"
                    BorderBrush="#CCCCCC"
                    BorderThickness="2"
                    CornerRadius="4">
                    <ComboBox
                        Padding="3"
                        BorderThickness="0"
                        DisplayMemberPath="Name"
                        FontSize="14"
                        IsEditable="True"
                        ItemsSource="{Binding AvailableCustomers}"
                        SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}" />
                </Border>
            </Grid>
            <!--  KO‘RISH + TOZALASH  -->
            <StackPanel
                Grid.Column="1"
                Margin="30,0,0,0"
                VerticalAlignment="Center"
                Orientation="Vertical">
                <Button
                    Height="32"
                    Margin="0,4"
                    md:ButtonAssist.CornerRadius="6"
                    Background="#1976D2"
                    BorderThickness="0"
                    Command="{Binding PreviewCommand}"
                    Content="Ko‘rish"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="White" />
                <Button
                    Height="32"
                    Margin="0,4"
                    md:ButtonAssist.CornerRadius="6"
                    Background="#607D8B"
                    BorderThickness="0"
                    Command="{Binding ClearFilterCommand}"
                    Content="Tozalash"
                    FontSize="14"
                    Foreground="White" />
            </StackPanel>
            <!--  PECHAT + EXCEL  -->
            <StackPanel
                Grid.Column="2"
                Margin="15,0"
                VerticalAlignment="Center"
                Orientation="Vertical">
                <Button
                    Height="32"
                    Margin="0,4"
                    md:ButtonAssist.CornerRadius="6"
                    Background="#00897B"
                    BorderThickness="0"
                    Command="{Binding PrintCommand}"
                    Content="Pechat"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="White" />
                <Button
                    Height="32"
                    Margin="0,4"
                    md:ButtonAssist.CornerRadius="6"
                    Background="#2E7D32"
                    BorderThickness="0"
                    Command="{Binding ExportToExcelCommand}"
                    Content="Excel"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="White" />
            </StackPanel>
        </Grid>
        <DataGrid
            Grid.Row="1"
            Margin="10,5"
            AlternatingRowBackground="#F5F5F5"
            AutoGenerateColumns="False"
            BorderBrush="#DDDDDD"
            FontSize="14"
            GridLinesVisibility="Horizontal"
            IsReadOnly="True"
            ItemsSource="{Binding FilteredItems}"
            RowHeight="48">
            <!--  ⭐ HEADERlarni o‘rtaga, fon rang, semi-bold  -->
            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                    <Setter Property="FontWeight" Value="SemiBold" />
                    <Setter Property="Background" Value="#E3F2FD" />
                    <Setter Property="Padding" Value="8" />
                </Style>
            </DataGrid.ColumnHeaderStyle>
            <DataGrid.Columns>
                <!--  Mijoz  -->
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding Name}"
                    Header="Mijoz" />
                <!--  Telefon  -->
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding Phone}"
                    Header="Telefon" />
                <!--  Address  -->
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding Address}"
                    Header="Manzil" />
                <!--  Bizga qarz (Debtor)  -->
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding DebtorAmount, StringFormat=N2}"
                    Header="Debit(Bizga qarzi)">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right" />
                            <Setter Property="Foreground" Value="#2E7D32" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  Bizning qarzimiz (Creditor)  -->
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding CreditorAmount, StringFormat=N2}"
                    Header="Kredit(Bizning qarzimiz)">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right" />
                            <Setter Property="Foreground" Value="#D32F2F" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
        <!--  Jami qatorlar soni va yig'indilar  -->
        <StackPanel
            Grid.Row="2"
            Margin="0,10,20,10"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <TextBlock
                Margin="0,0,20,0"
                FontSize="14"
                FontWeight="Medium"
                Foreground="#555"
                Text="{Binding FilteredItems.Count, StringFormat='Jami yozuvlar: {0} ta'}" />
            <TextBlock
                Margin="0,0,20,0"
                FontSize="14"
                FontWeight="Medium"
                Foreground="#2E7D32"
                Text="{Binding TotalDebtor, StringFormat='Jami debitor: {0:N2}'}" />
            <TextBlock
                Margin="0,0,20,0"
                FontSize="14"
                FontWeight="Medium"
                Foreground="#D32F2F"
                Text="{Binding TotalCreditor, StringFormat='Jami kreditor: {0:N2}'}" />
            <TextBlock
                FontSize="14"
                FontWeight="Bold"
                Text="{Binding TotalBalance, StringFormat='Umumiy balans: {0:N2}'}" />
        </StackPanel>
    </Grid>
</UserControl>